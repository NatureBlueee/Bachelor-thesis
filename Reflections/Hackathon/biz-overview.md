# 论文协作系统增强：业务分析文档

> **版本**：v1
> **创建**：2025-12-19
> **状态**：已确认方向

---

## 1. 业务背景

### 现状

我们有一个运行中的「论文工程化协作系统」，用于管理本科毕业论文的写作过程。

**已验证的核心价值**：
- PR 驱动的修改管理
- Reference/ 文献库 + PDF→Markdown
- Consensus/ 结构化学术讨论
- `.agent/rules/` 负面约束设计

**当前痛点**（2025-12-19 诊断）：
| 层 | 问题 | 严重程度 |
|----|------|---------|
| 记忆层 | 调用不准确、不灵敏、AI不自动判断什么值得记 | ⚠️ 高 |
| 知识层 | 检索不深入、同步性差、缺多层索引 | ⚠️ 中 |
| 同步层 | 各模块信息孤岛、AI"部分遵循"指令 | ⚠️ 高 |
| 讨论层 | Consensus App 无API，流程断裂 | ⚠️ 低（外部限制） |

### 机会

1. **自用增强**：解决即时痛点，提升论文写作效率
2. **参赛机会**：OpenAgents Multi-Agent Hackathon 2025（截止 12月31日）

---

## 2. 核心问题定义

### P1：系统缺少"变更事件"概念

**表现**：
- AI 更新了 MEMORY.md 内容，但没更新标题时间戳
- PR 状态变更后，其他模块不知道
- 新增文献后，_INDEX.md 不自动更新

**根因**：
当前架构是「静态文件」，没有「变更 → 触发连锁更新」的机制。

### P2：记忆不智能

**表现**：
- 需要用户说"记住这个"才会记
- 记的内容不是最重要的
- 没有自动整合和去重

**根因**：
缺少 LLM 参与的"记忆决策"和"记忆整理"步骤。

### P3：知识检索不精准

**表现**：
- 文献里有但 AI 说没有
- 一次读整篇效率低

**根因**：
缺少多层索引结构（摘要 → 章节 → 原文）。

---

## 3. 业务目标

### G1：完成自用系统增强

**成功指标**：
- 记忆系统能自动识别"值得记"的内容
- 文献检索准确率提升
- 状态同步覆盖率 100%

### G2：完成参赛 Demo

**成功指标**：
- 在 OpenAgents 平台部署可运行的 Multi-Agent 网络
- 3分钟演示视频
- GitHub 仓库文档完整

---

## 4. 本期范围（In Scope）

### 自用分支（main）

| 模块 | 目标 | 优先级 |
|------|------|--------|
| 同步工作流 | 创建 `/sync` 工作流解决联动更新 | P0 |
| 记忆工作流 | 创建 `/reflect` 工作流做对话后记忆提取 | P0 |
| 索引重构 | 三层结构 + 摘要卡片 | P1 |
| 状态文件 | 创建 `_STATE.md` 集中管理元信息 | P1 |

### 参赛分支（hackathon）

| 模块 | 目标 | 优先级 |
|------|------|--------|
| Agent 定义 | 6个Agent的 prompt 文档 | P0 |
| 演示场景 | 一个完整的使用流程 | P0 |
| 架构文档 | 符合 OpenAgents 规范 | P1 |

---

## 5. 非本期范围（Out of Scope）

- Consensus App 自动化（无 API，暂不解决）
- 复杂的代码实现（参赛用文档驱动，不写复杂后端）
- 商业化考量

---

## 6. 版本规划

### 自用 MVP（本周内）

```
目标：解决最痛的两个问题——记忆 + 同步

Day 1-2:
- [ ] 设计 /sync 工作流
- [ ] 设计 /reflect 工作流

Day 3-4:
- [ ] 重构 Reference/_INDEX.md 为分组结构
- [ ] 创建 _STATE.md 模板

Day 5-7:
- [ ] 在实际论文写作中验证
- [ ] 迭代调整
```

### 参赛 MVP（12月31日前）

```
目标：有一个可演示的 Multi-Agent 网络

Week 1 (12月19-25日):
- [ ] 6个Agent的 prompt 定义文档
- [ ] 架构设计文档

Week 2 (12月26-31日):
- [ ] 在 OpenAgents 平台测试
- [ ] 录制演示视频
- [ ] 提交
```

---

## 7. 关键假设 & 验证计划

| 假设 | 验证方式 | 止损信号 |
|------|---------|---------|
| /sync 工作流能解决"部分遵循"问题 | 实际使用3天 | 仍然频繁漏更新 |
| /reflect 能自动识别记忆点 | 对比手动 vs 自动提取质量 | 漏掉重要信息50%+ |
| OpenAgents 支持我们的架构 | 12月25日前跑通 Hello World | 技术不兼容 |

---

## 8. 风险 & 机会

### 风险

| 风险 | 概率 | 影响 | 缓解 |
|------|------|------|------|
| 参赛时间不够 | 中 | 高 | 简化演示范围 |
| 自用增强影响论文进度 | 低 | 高 | 限定投入时间 |
| OpenAgents 技术不兼容 | 低 | 中 | 提前验证 |

### 机会

- 参赛获奖 → 影响力 + 可能的商业化验证
- 自用增强 → 论文写作更顺畅
- 开源 → 帮助其他研究生

---

## 9. 给下游的摘要

### 给 Tech（工作流设计）

**核心需求**：
1. `/sync` 工作流：变更后自动同步相关模块
2. `/reflect` 工作流：对话后提取记忆点
3. `_STATE.md`：集中管理系统状态

### 给 Proj（排期）

**时间约束**：
- 自用：本周内完成 MVP
- 参赛：12月31日截止

**资源约束**：
- 一个人（用户）
- 多个 AI IDE 窗口可并行

---

## 10. 待确认问题 [OPEN]

- [ ] 记忆提取的 prompt 模板从哪个开源项目借鉴？
- [ ] _STATE.md 的更新时机需要明确列表
- [ ] 参赛的演示场景选哪个最能打动评委？

---

## Changelog

| 日期 | 变更 | 作者 |
|------|------|------|
| 2025-12-19 | 初版创建 | biz-owner + 用户 |
